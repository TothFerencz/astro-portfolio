---
import type { CollectionEntry } from 'astro:content';
import Socials from '../components/Socials.astro';

interface Props {
  works: CollectionEntry<'works'>[];
}

const { works } = Astro.props;
---

<section class="pt-32 pb-32">

  <!-- HEADER -->
  <div class="mx-auto max-w-7xl px-6">
    <div class="mb-24 grid items-start gap-16 md:grid-cols-2">

      <!-- LEFT -->
      <div>
        <div class="mb-6 flex items-center gap-3 text-sm">
          <span class="h-3 w-3 rounded-full bg-black"></span>
          <span>My Works</span>
        </div>

        <h1>
          Checkout our latest and<br />
          creative works.
        </h1>
      </div>

      <!-- RIGHT PREVIEW (NAGYOBB KÃ‰PEK) -->
      <div class="hidden justify-end gap-8 md:flex">
        {works.slice(0, 3).map((work) => (
          <img
            src={work.data.images[0]}
            alt={work.data.title}
            class="h-48 w-48 rounded-2xl object-cover"
            loading="lazy"
          />
        ))}
      </div>

    </div>
  </div>

  <!-- SOCIAL -->
  <Socials />

  <!-- WORK LIST -->
  <div class="mx-auto max-w-7xl px-6 mt-32 space-y-40">

    {works.map((work) => (
      <a
        href={`/works/${work.slug}`}
        class="block transition hover:opacity-90"
      >
        <article class="grid items-start gap-20 md:grid-cols-2">

          <!-- LEFT META -->
          <div>
            <h2 class="mb-4">
              {work.data.title}
            </h2>

            <p class="mb-10 max-w-md">
              {work.body.slice(0, 140)}...
            </p>

            <div class="divide-y divide-gray-300 text-sm">
              <div class="flex justify-between py-4">
                <span class="text-gray-500">CLIENT</span>
                <span>{work.data.client}</span>
              </div>

              <div class="flex justify-between py-4">
                <span class="text-gray-500">TOOLS</span>
                <span>{work.data.tools.join(', ')}</span>
              </div>

              <div class="flex justify-between py-4">
                <span class="text-gray-500">YEAR</span>
                <span>{work.data.year}</span>
              </div>

              <div class="flex justify-between py-4">
                <span class="text-gray-500">SERVICE</span>
                <span>{work.data.service}</span>
              </div>
            </div>
          </div>

          <!-- RIGHT IMAGES -->
          {work.data.images.length === 1 ? (

            <!-- SINGLE IMAGE -->
            <div class="flex items-center justify-center">
              <div class="w-full max-w-xl overflow-hidden rounded-xl">
                <img
                  src={work.data.images[0]}
                  alt={work.data.title}
                  class="w-full object-cover"
                  loading="lazy"
                />
              </div>
            </div>

          ) : (

            <!-- MULTI IMAGE -->
            <div class="grid gap-8 grid-cols-1 md:grid-cols-2">
              {work.data.images.slice(0, 2).map((img) => (
                <div class="overflow-hidden rounded-xl">
                  <img
                    src={img}
                    alt={work.data.title}
                    class="h-full w-full object-cover"
                    loading="lazy"
                  />
                </div>
              ))}
            </div>

          )}

        </article>
      </a>
    ))}

  </div>
</section>
