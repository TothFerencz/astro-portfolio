---
import { getCollection } from 'astro:content';
import BlogLayout from '../../layouts/BlogLayout.astro';
export const prerender = true;
export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

const title = `${post.data.title} – Toth Ferencz`;
const description = post.data.title;
const canonical = `https://tothferencz.com/blog/${post.slug}`;
const ogImage = `https://tothferencz.com${post.data.cover}`;
---
<BlogLayout
  title={title}
  description={description}
  canonical={canonical}
  ogImage={ogImage}
>
  <article class="mx-auto max-w-7xl px-6 py-16">
    <div class="mb-6 text-sm opacity-60">
      {post.data.category} ✦ {post.data.date.toLocaleDateString('en-US')}
    </div>

    <h1 class="mb-10">
      {post.data.title}
    </h1>

    {post.data.cover && (
      <img
        src={post.data.cover}
        alt={post.data.title}
        class="mb-10 w-full rounded-xl object-cover"
      />
    )}

    <div class="prose prose-neutral max-w-none">
      <Content />
    </div>
  </article>
</BlogLayout>
